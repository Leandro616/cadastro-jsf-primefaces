<!DOCTYPE html>
<html
  lang="pt-br"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:p="http://primefaces.org/ui"
>
  <h:head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Gestao Empresas</title>
    <h:outputStylesheet library="assets" name="estilo.css" />
  </h:head>
  <h:body>
    <header>
      <h:graphicImage
        library="assets"
        name="logo.png"
        width="200px"
        style="margin-top: 10px"
      />
    </header>

    <div id="conteudo">
      <h:form>
        <p:panelGrid columns="2" layout="tabular" styleClass="ui-noborder style">
          <p:outputLabel for="razaoSocial" value="Razão Social" />
          <h:panelGroup>
            <p:inputText
              id="razaoSocial"
              value="#{gestaoEmpresasBean.empresa.razaoSocial}"
              required="true"
              label="Razão Social"
            />
            <p:message for="razaoSocial" />
          </h:panelGroup>

          <p:outputLabel for="nomeFantasia" value="Nome Fantasia" />
          <p:inputText
            id="nomeFantasia"
            value="#{gestaoEmpresasBean.empresa.nomeFantasia}"
          />

          <p:outputLabel for="tipo" value="Tipo Empresa" />
          <p:selectOneMenu
            id="tipo"
            value="#{gestaoEmpresasBean.empresa.tipo}"
            required="true"
          >
            <f:selectItem itemLabel="Selecione..." />
            <f:selectItems
              value="#{gestaoEmpresasBean.tiposEmpresa}"
              var="tipoEmpresa"
              itemLabel="#{tipoEmpresa.descricao}"
              itemValue="#{tipoEmpresa}"
            />
          </p:selectOneMenu>

          <p:outputLabel for="dataFundacao" value="Data Fundação" />
          <h:panelGroup>
            <p:inputText
              id="dataFundacao"
              value="#{gestaoEmpresasBean.empresa.dataFundacao}"
              label="Data Fundação"
            >
              <f:converter converterId="localDateConverter" />
            </p:inputText>
            <!-- exibe mensagens de erro do id definido -->
            <p:message for="dataFundacao" />
          </h:panelGroup>

          <p:outputLabel for="cnpj" value="CNPJ" />
          <h:panelGroup>
            <p:inputText
              id="cnpj"
              value="#{gestaoEmpresasBean.empresa.cnpj}"
              label="CNPJ"
            >
              <f:validateLength maximum="18" minimum="18" />
            </p:inputText>
            <p:message for="cnpj" />
          </h:panelGroup>

          <p:outputLabel for="faturamento" value="Faturamento" />
          <h:panelGroup>
            <p:inputText
              id="faturamento"
              value="#{gestaoEmpresasBean.empresa.faturamento}"
              label="Faturamento"
            >
              <f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
              <f:validateDoubleRange minimum="0" />
            </p:inputText>
            <p:message for="faturamento" />
          </h:panelGroup>

          <!-- como o primefaces usa ajax ele não atualiza todos os componentes em uma requisisão -->
          <!-- por isso usamos aqui o update passando o id do componente ou um alias nesse caso -->
          <p:commandButton
            value="Salvar"
            actionListener="#{gestaoEmpresasBean.salvar}"
            update="@form"
          />
        </p:panelGrid>
      </h:form>
    </div>

    <footer>Curso JSF e Primefaces</footer>
  </h:body>
</html>
